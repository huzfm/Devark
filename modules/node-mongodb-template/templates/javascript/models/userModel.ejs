import mongoose from "mongoose";

const userSchema = new mongoose.Schema(
{
name: {
type: String,
required: [true, "Name is required"],
trim: true,
minlength: [2, "Name must be at least 2 characters"],
maxlength: [50, "Name cannot exceed 50 characters"],
},
email: {
type: String,
required: [true, "Email is required"],
unique: true,
lowercase: true,
trim: true,
match: [
/^[^\s@]+@[^\s@]+\.[^\s@]+$/,
"Please provide a valid email address",
],
},
},
{
timestamps: true,
versionKey: false,
}
);

// Optional: pre-save hook
userSchema.pre("save", function (next) {
this.email = this.email.toLowerCase();
next();
});

export default mongoose.model("User", userSchema);