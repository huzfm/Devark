import express from "express";
import passport from "passport";
import "../config/githubStrategy.js";

const router = express.Router();

router.get("/auth/github", passport.authenticate("github", { scope: ["user:email"] }));

router.get(
"/auth/github/callback",
passport.authenticate("github", { failureRedirect: "/" }),
(req, res) => {
res.redirect("/auth/github/success");
}
);

router.get("/auth/github/success", (req, res) => {
res.json({ message: "GitHub login successful", user: req.user });
});

export default router;